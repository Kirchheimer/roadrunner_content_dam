<!DOCTYPE html>
<html lang="en" data-theme="bumblebee">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CWCAGScanner - Dynamic Section</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.10.2/dist/full.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="project-content">
        <div class="loading loading-spinner loading-lg mx-auto block"></div>
        <p class="text-center mt-4">Loading content...</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const sectionId = urlParams.get('section') || urlParams.get('id');
            loadSectionContent(sectionId);
        });

        async function loadSectionContent(sectionId) {
            if (!sectionId) {
                showError('No section specified. Use ?section=section-id parameter.');
                return;
            }

            try {
                const response = await fetch('./content.json');
                const project = await response.json();
                
                const section = project.sections.find(s => s.id === sectionId);
                
                if (section) {
                    renderSection(section);
                } else {
                    showError(`Section "${sectionId}" not found. Available sections: ${project.sections.map(s => s.id).join(', ')}`);
                }
                
            } catch (error) {
                console.error('Error loading content:', error);
                showError('Error loading content. Please check the content.json file.');
            }
        }

        function renderSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            switch(section.layout) {
                case 'two-column':
                    renderTwoColumnSection(section);
                    break;
                case 'single-column-centered':
                    renderSingleColumnSection(section);
                    break;
                case 'three-column-steps':
                    renderStepsSection(section);
                    break;
                case 'three-column-cards':
                    renderCardsSection(section);
                    break;
                case 'three-column-comparison':
                    renderComparisonSection(section);
                    break;
                case 'feature-grid':
                    renderFeatureGridSection(section);
                    break;
                default:
                    renderDefaultSection(section);
            }
        }

        function renderTwoColumnSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            const columnsHtml = section.content.map(col => `
                <div class="card bg-base-100 shadow-lg">
                    <div class="card-body">
                        <div class="prose max-w-none">
                            <p class="whitespace-pre-line leading-relaxed">
                                ${escapeHtml(col.body)}
                            </p>
                        </div>
                    </div>
                </div>
            `).join('');
            
            contentDiv.innerHTML = `
                <div class="py-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold text-base-content mb-4">
                            ${escapeHtml(section.heading)}
                        </h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                        ${columnsHtml}
                    </div>
                </div>
            `;
        }

        function renderSingleColumnSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            contentDiv.innerHTML = `
                <div class="py-8">
                    <div class="hero bg-primary text-primary-content">
                        <div class="hero-content text-center">
                            <div class="max-w-4xl">
                                <h2 class="text-3xl md:text-4xl font-bold mb-8">
                                    ${escapeHtml(section.heading)}
                                </h2>
                                <div class="prose prose-lg max-w-none text-primary-content">
                                    <p class="whitespace-pre-line leading-relaxed opacity-90">
                                        ${escapeHtml(section.body)}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStepsSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            const stepsHtml = section.steps.map((step, index) => `
                <div class="step step-primary">
                    <div class="card bg-base-100 shadow-lg">
                        <div class="card-body">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="badge badge-primary badge-lg text-lg font-bold">
                                    ${escapeHtml(step.number)}
                                </div>
                                <h3 class="card-title text-xl">
                                    ${escapeHtml(step.title)}
                                </h3>
                            </div>
                            <p class="text-base-content/70">
                                ${escapeHtml(step.description)}
                            </p>
                        </div>
                    </div>
                </div>
            `).join('');
            
            contentDiv.innerHTML = `
                <div class="py-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold text-base-content mb-4">
                            ${escapeHtml(section.heading)}
                        </h2>
                    </div>
                    <div class="max-w-4xl mx-auto">
                        <ul class="steps steps-vertical lg:steps-horizontal w-full">
                            ${stepsHtml}
                        </ul>
                    </div>
                </div>
            `;
        }

        function renderCardsSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            const cardsHtml = section.cards.map(card => `
                <div class="card bg-success text-success-content shadow-lg">
                    <div class="card-body">
                        <h3 class="card-title text-2xl mb-4">
                            ${escapeHtml(card.title)}
                        </h3>
                        <p class="mb-6 opacity-90">
                            ${escapeHtml(card.description)}
                        </p>
                        <div class="space-y-2">
                            ${card.features.map(feature => `
                                <div class="flex items-center gap-2">
                                    <div class="badge badge-neutral badge-sm">✓</div>
                                    <span class="text-sm">${escapeHtml(feature)}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
            
            contentDiv.innerHTML = `
                <div class="py-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold text-base-content mb-4">
                            ${escapeHtml(section.heading)}
                        </h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">
                        ${cardsHtml}
                    </div>
                </div>
            `;
        }

        function renderComparisonSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            const levelsHtml = section.levels.map(level => `
                <div class="card bg-base-100 shadow-lg border-l-4 border-primary">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="badge badge-primary badge-lg font-bold">
                                ${escapeHtml(level.level)}
                            </div>
                            <h3 class="card-title text-xl">
                                ${escapeHtml(level.title)}
                            </h3>
                        </div>
                        <p class="mb-6 text-base-content/70">
                            ${escapeHtml(level.description)}
                        </p>
                        <div class="space-y-2">
                            ${level.features.map(feature => `
                                <div class="flex items-center gap-2">
                                    <div class="badge badge-outline badge-sm">✓</div>
                                    <span class="text-sm">${escapeHtml(feature)}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
            
            contentDiv.innerHTML = `
                <div class="py-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold text-base-content mb-4">
                            ${escapeHtml(section.heading)}
                        </h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">
                        ${levelsHtml}
                    </div>
                </div>
            `;
        }

        function renderFeatureGridSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            const featuresHtml = section.features.map(feature => `
                <div class="card bg-base-100 shadow-lg">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="badge badge-primary badge-lg">
                                ${getIconSvg(feature.icon)}
                            </div>
                            <h3 class="card-title text-lg">
                                ${escapeHtml(feature.title)}
                            </h3>
                        </div>
                        <p class="text-base-content/70">
                            ${escapeHtml(feature.description)}
                        </p>
                    </div>
                </div>
            `).join('');
            
            contentDiv.innerHTML = `
                <div class="py-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold text-base-content mb-4">
                            ${escapeHtml(section.heading)}
                        </h2>
                        ${section.body ? `
                            <p class="text-lg text-base-content/70 max-w-3xl mx-auto">
                                ${escapeHtml(section.body)}
                            </p>
                        ` : ''}
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">
                        ${featuresHtml}
                    </div>
                </div>
            `;
        }

        function renderDefaultSection(section) {
            const contentDiv = document.getElementById('project-content');
            
            contentDiv.innerHTML = `
                <div class="py-8">
                    <div class="card bg-base-100 shadow-lg max-w-4xl mx-auto">
                        <div class="card-body">
                            <h2 class="card-title text-3xl mb-6">
                                ${escapeHtml(section.heading)}
                            </h2>
                            <div class="prose max-w-none">
                                <p class="whitespace-pre-line leading-relaxed">
                                    ${escapeHtml(section.body || 'No content available for this section.')}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getIconSvg(iconName) {
            const icons = {
                'code': '{ }',
                'lightbulb': '💡',
                'copy': '📋',
                'integration': '🔗',
                'trending-up': '📈',
                'team': '👥'
            };
            return icons[iconName] || '•';
        }

        function showError(message) {
            const contentDiv = document.getElementById('project-content');
            contentDiv.innerHTML = `
                <div class="alert alert-error max-w-2xl mx-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>${message}</span>
                </div>
            `;
        }

        function escapeHtml(text) {
            if (typeof text !== 'string') return text;
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
</body>
</html>
